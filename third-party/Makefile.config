# Author: Dmitry Kukovinets (d1021976@gmail.com)

# Makefile for third-party parts of this program.

include $(MAKEFILE_ADVANCED_ABS)


# Path for Nlohmann JSON library
JSON_PATH								= json

# Path for Mongo driver
MONGO_CXX_DRIVER_PATH					= mongo-cxx-driver


# Project library dir
LIBS_DIR_CURR							= $(LIBS_DIR_ABS)
THIRDPARTY_DIR_CURR						= $(THIRDPARTY_DIR_ABS)


export MONGO_CXX_DRIVER_PATH_ABS		= $(call get_thirdparty_files,"$(MONGO_CXX_DRIVER_PATH)")

# Installation path for Mongo driver
export MONGO_CXX_DRIVER_INSTALLED_ABS	= "$(MONGO_CXX_DRIVER_PATH_ABS)/build/installed"


THIRDPARTY_FILES						= 
THIRDPARTY_FILES_ABS					= 
ifeq ($(SYSTEM),Darwin)
	THIRDPARTY_FILES					+= "libut_mongoclient.dylib"
	THIRDPARTY_FILES_ABS				+= "$(LIBS_DIR_CURR)/libut_mongoclient.dylib"
else
	THIRDPARTY_FILES					+= "libut_mongoclient.so"
	THIRDPARTY_FILES_ABS				+= "$(LIBS_DIR_CURR)/libut_mongoclient.so"
endif


export GPP_HEADER_PATHS					+= -I"$(MONGO_CXX_DRIVER_INSTALLED_ABS)/include"

# Don't need: libmongoclient.so will be moved to PROJECT/libs/libut_mongoclient.so
# export GPP_LIB_PATHS			+= "$(MONGO_CXX_DRIVER_INSTALLED_ABS)/lib"

export THIRDPARTY_FILES
export THIRDPARTY_FILES_ABS
